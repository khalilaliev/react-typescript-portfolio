function initPdfViewer(e){$(e).pdfViewer({dataParams:{ajaxPreviewUrl:"ajax-preview-url",viewPDFUrl:"view-pdf-url"},selectors:{openPdfViewerBlock:".js-show-pdf-viewer",pdfViewerProcessingBlock:".js-processing-pdf-preview",resumeFilePreviewContainer:".js-resume-file-preview-component"}})}!function(e){var i={Extends:ModalWnd,jQuery:"ModalWithPDFViewer",options:{pressEsc:1,dataParam:null},_build:function(){if(null===this.options.dataParam)throw new Error("ModalWithPDFViewer plugin required `viewPdfUrl` option.");var i=this,n=e("body");window.location.pathname.match("/employer/my/applicants")&&n.find(".container-absolute").length&&n.find(".container-absolute").remove(),this.wnd=e("<div />",{css:{position:"fixed",left:0,top:5e3,zIndex:9999,height:"100%",display:"none",backgroundColor:"rgba(0,0,0,0)"},class:"container-absolute"}).appendTo(n),this.container=this.wnd,this.active=!1,n.keydown(this.proxied.checkEsc),this.$el.click((function(e){e.preventDefault(),i.open(e)}))},open:function(i){var n,t=this,o=e(i.target).data(t.options.dataParam);if(void 0!==o&&0!==o.length){if(this.wnd.css({display:"block"}),this.options.pressEsc=0,this.active=!0,window.location.pathname.match("/employer/my/applicants")&&window.innerWidth<=991&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){var r=window.getComputedStyle(document.body).getPropertyValue("top");n=-1*parseInt(r)}else n=window.scrollY;this.wnd.animate({top:n+"px"},{duration:400,complete:function(){e("body").css("overflow","hidden"),t.wnd.css({position:"absolute"}),t.setContent('<iframe src="'+o+'" frameborder="0" width="100%" height="'+window.innerHeight+'">Ваш браузер не поддерживает iframe.</iframe>'),t.options.pressEsc=1,t.setAfterPrintHandler()}}),window.onmessage=function(e){"closeWindow"===e.data&&t.close()}}},close:function(){e("body").css("overflow","auto"),this.wnd&&this.wnd.css({display:"none",top:"1000px",position:"fixed"}).empty();var i=e('[data-spy="affix"]');return i.length>0&&i.affix("checkPosition"),this.active=!1,!1},checkEsc:function(e){this.active&&this.options.pressEsc&&27===e.keyCode&&this.close()},setAfterPrintHandler:function(){if(this.container&&this.container.find("iframe").length){var e=new Event("onPdfViewerAfterPrint");this.container.find("iframe")[0].contentWindow&&(this.container.find("iframe")[0].contentWindow.onafterprint=function(){window.dispatchEvent(e)})}}};i=new Class(i)}(jQuery),function(e){e.fn.pdfViewer=function(i){var n=this,t={data:{openPdfViewerBlocks:null,pdfViewerProcessingBlocks:null,resumeFilePreviewContainer:null,loadResumePDFPreviewIntervalId:null,ajaxPreviewUrl:null,resumeFilePreviewControls:null,onlyPreview:!1},options:{hasAccessForOpenPDFViewer:null,dataParams:{ajaxPreviewUrl:null,viewPDFUrl:null},selectors:{openPdfViewerBlock:null,pdfViewerProcessingBlock:null,resumeFilePreviewContainer:null,resumeFilePreviewControls:null}},init:function(e,i){this.data.openPdfViewerBlocks=e.find(i.selectors.openPdfViewerBlock),this.data.resumeFilePreviewContainer=e.find(i.selectors.resumeFilePreviewContainer),0!==this.data.resumeFilePreviewContainer.length&&0!==this.data.openPdfViewerBlocks.length&&(this.data.pdfViewerProcessingBlocks=this.data.openPdfViewerBlocks.filter(i.selectors.pdfViewerProcessingBlock),this.data.ajaxPreviewUrl=this.data.openPdfViewerBlocks.data(i.dataParams.ajaxPreviewUrl),this.data.resumeFilePreviewControls=e.find(i.selectors.resumeFilePreviewControls),i.dataParams.onlyPreview&&(this.data.onlyPreview=i.dataParams.onlyPreview),this.options=i,"boolean"!=typeof this.options.hasAccessForOpenPDFViewer&&(this.options.hasAccessForOpenPDFViewer=!0),0===this.data.pdfViewerProcessingBlocks.length?this.options.hasAccessForOpenPDFViewer?this.onListenerForOpenPDFViewerModal():this.onListenerForOpeningResumeContacts():this.data.pdfViewerProcessingBlocks.length>0&&(this.data.loadResumePDFPreviewIntervalId=setInterval(this.loadResumePDFPreview,1e3,this)))},loadResumePDFPreview:function(i){e.ajax({url:i.data.ajaxPreviewUrl,data:{onlyPreview:i.data.onlyPreview},success:function(e,n){"success"===n&&e.contentHtml&&(clearInterval(i.data.loadResumePDFPreviewIntervalId),i.data.resumeFilePreviewContainer.replaceWith(e.contentHtml),i.refreshOpenPdfViewerBlocks.call(i),i.refreshPDFViewerControls.call(i),i.onListenerForOpeningResumeContacts.call(i),i.options.hasAccessForOpenPDFViewer&&i.onListenerForOpenPDFViewerModal.call(i))},error:function(){clearInterval(i.data.loadResumePDFPreviewIntervalId)}})},onListenerForOpenPDFViewerModal:function(){this.data.openPdfViewerBlocks.ModalWithPDFViewer({dataParam:this.options.dataParams.viewPDFUrl})},onListenerForOpeningResumeContacts:function(){var i=this;e(document).on("resume-contacts-opened",(function(){i.data.resumeFilePreviewControls&&i.data.resumeFilePreviewControls.length>0&&i.data.resumeFilePreviewControls.each((function(){e(this).show()})),i.onListenerForOpenPDFViewerModal.call(i)}))},refreshOpenPdfViewerBlocks:function(){this.data.openPdfViewerBlocks=n.find(i.selectors.openPdfViewerBlock)},refreshPDFViewerControls:function(){this.data.resumeFilePreviewControls=n.find(i.selectors.resumeFilePreviewControls)}};if(0===n.length)throw new Error("Required resume container");t.init(n,i)}}(jQuery);