if(void 0===dataLayer)var dataLayer=[];!function(e){function t(){e("body").removeClass("overflow"),e("#search-sort-filter").prev(".js-backdrop-window").fadeOut(50),e("#search-sort-filter").addClass("hidden").animate({top:5e3})}new Class({Extends:ModalWnd,jQuery:"filterWindow",content:null,active:!1,adsLoaded:!1,currentWidth:null,options:{width:992,pressEsc:1,submitform:""},_build:function(){this.options;var t=e("body"),i=this;this.wnd=e("<div />",{id:"filter-window",css:{position:"fixed",left:0,top:5e3,zIndex:1175,height:"100%",display:"none",borderRadius:20},class:"container-absolute"}).appendTo(t),e("#filter-window").before('<div class="backdrop-window js-backdrop-window" style="display: none"></div>'),this.isMobile()?this.active=!1:(this.active=document.location.search.search("advs=1")>0,this.adsLoaded=!this.active,this.adsLoaded&&winOnloadBanner()),t.keydown(this.proxied.checkEsc),e(window).on("resize",(function(){e("#dropdownMenu1").parent().removeClass("open"),i.isMobile()&&i.setFilterHeight()}))},updateCloseEvent:function(){var t=this;this.isMobile()&&e(".link-close",this.wnd).off("click").on("click",(function(){t.close(!1)}))},update:function(){var t=this.options;this.isMobile()?(e(t.contentblock).length&&(this.wnd.empty().append(e(t.contentblock)),this.content=!0),this.updateCloseEvent()):(e(t.contentback).append(e(t.contentblock)),this.content=null,e(t.contentback).is(":visible")&&(this.active=!0)),!this.active||this.wnd.find("div").length||e(t.contentback).is(":visible")||this.close(!1),this.$el.trigger("window.update")},open:function(){var t=this,i=this.options,n=e("#adv-search .glyphicon-chevron-down");return this.isMobile()?(this.active=!0,t.setFilterHeight(),t.options.pressEsc=0,e("body").addClass("overflow"),e("#filter-window").prev(".js-backdrop-window").fadeIn(50),this.wnd.css({display:"block"}).animate({top:30},{duration:400,complete:function(){e(window).scrollTop(0),t.options.pressEsc=1}}),this.$el.trigger("window.open"),this.$el.scrollingFilterOnIOS(),!1):(this.active?(e(".filter-switch-visibility").show(),e(".similar-jobs").length>0&&(e(".similar-jobs").slideToggle(),e("#sim-pad").toggle(400)),e(i.contentback).hide(),n.removeClass("rotate-180"),this.active=!1,e("#advs").val(0),this.adsLoaded||(winOnloadBanner(),this.adsLoaded=!0)):(e(".filter-switch-visibility").hide(),e(".similar-jobs").length>0&&(e(".similar-jobs").slideToggle(),e("#sim-pad").toggle(400)),e(i.contentback).show(),n.addClass("rotate-180"),this.active=!0,e("#advs").val(1)),this.updateAdvsGetParam(this.active),!0)},setFilterHeight:function(){this.wnd.css("height",window.innerHeight+"px")},isMobile:function(){return e(document).outerWidth()<this.options.width},close:function(t){if(!1===this.active)return!1;if(!1===t&&!this.isMobile())return!1;var i=this,n=e.Deferred();return this.$el.trigger("window.close",[void 0===t||t,n]),n.promise().always((function(){e("body").removeClass("overflow"),e("#filter-window").prev(".js-backdrop-window").fadeOut(50),i.wnd.css({display:"none",top:"1000px",position:"fixed"}),i.active=!1})),!1},checkEsc:function(e){this.active&&this.options.pressEsc&&27==e.keyCode&&this.close()},updateAdvsGetParam:function(e){var t=[location.protocol,"//",location.host,location.pathname].join(""),i=document.location.search,n="advs=1",o="";e?o=i?i+"&"+n:"?"+n:i&&(o=(o=i.replace(n,"")).replace(/([\?&])&/,"$1").replace(/&+$/,"")),o="?"==o?"":o;var s=history.state?history.state:{};s.url=t+o,history.replaceState(s,"",t+o+location.hash),Work.widgets.languageSwitcher.prepareUrls((function(t){var i=t.find("a").attr("href");return e?i+"&"+n:i.replace("&"+n,"")}))}}),new Class({Implements:[Options],jQuery:"jobSearch",$el:null,_timer:null,updatePage:!0,updateFilter:!1,paginationReload:!1,prevBtnPageNumber:1,stateUrl:null,checkboxes:["industry","category","employment","nosalary","experience","noresume","deferment","student","veteran","retired","disability","notitle","nosynonym","anyword","language","language_level","be_first","has_phone","will_be_hidden","high_salary","company","without_remote"],checkboxesDependency:["language","language_level"],languages:[],dropdowns:["salaryfrom","salaryto","education"],options:{justForm:!0,searchForm:"#searchform",searchInput:"#search",cityInput:".js-main-region",cityInputHidden:".js-rvalue",searchButton:".btn-search",searchHint:".setsearch",formtype:"shortForm",nearHomeCityInput:".js-near-home-city-id",geopositionClass:"form-control-icon form-control-geo",selector:null,container:null,jobListContainer:null,infinityScroll:null,setFocus:!0,filterWindow:{contentblock:"div.filters-block",contentback:"#filters-block",searchForm:"#searchform"}},topPosition:0,topPositionElement:[],initialize:function(t,i){this.setOptions(i),this.checkboxes=this.getCheckboxes();var n=this.options;return e(n.searchForm).SearchSubmit({formtype:n.formtype}),e(n.searchInput).SearchComplete({withCompanies:1,optList:{icon:1,divider:1,class:"list-tips-groups"}}),!n.setFocus||document.location.hash.test(/#.+/)||navigator.userAgent.match(/iPhone|iPad|iPod|Android/i)||e(n.searchInput).focus(),e(n.searchHint).setSearch(),this._geolocationListeners(),n.justForm||(e.pjax.defaults.timeout=0,this._build(),this._refreshEvents()),this},_geolocationListeners:function(){var t=this.options,i=e([t.searchForm,t.cityInput].join(" ")).attr("placeholder");e(window).on("geolocation.autodetect.nearHomeCity.start",(function(i){e(t.searchForm).find([t.searchInput,t.cityInput,t.searchButton].join(",")).attr("disabled",!0).filter(t.cityInput).attr("placeholder",lang.search_form.loading)})).on("geolocation.autodetect.nearHomeCity.finish",(function(n){e(t.searchForm).find([t.searchInput,t.cityInput,t.searchButton].join(",")).removeAttr("disabled").filter(t.cityInput).attr("placeholder",i)}))},_formSubmitEvent:function(){var t=this.options,i=this;e(t.searchForm).off("submit").on("submit",(function(){var n=e(t.searchInput).data("SearchComplete");return n&&n.saveLocalQueries(),i._submit(),i.prevBtnPageNumber=0,!1}))},_build:function(){var t=this.options,i=e("body"),n=this;i.filterWindow(t.filterWindow),e(document).on("click","#adv-search, #filter-mobile-menu",(function(e){return e.preventDefault(),i.filterWindow("open")})),i.on("window.open",(function(){n.updatePage=!1,n.updateFilter=!0,n.stateUrl=location.href,n._preventMobileNavigationJumping(),n._loadFilters()})).on("window.close",(function(i,o,s){n.updatePage=!0,n.updateFilter=!1,o&&n.stateUrl?n._reconnect((function(){return e.pjax.reload(t.container,{url:n.stateUrl})})).done((function(){n._loadFilters(!1),n.stateUrl=null})).done(s.resolve).fail(s.reject):(n.stateUrl=null,s.resolve()),s.resolve()})),this._formSubmitEvent(),e(document).on("click","#adv-search",(function(){e("#adv-bl").slideToggle(200)})),e(document).on("pjax:popstate",(function(n){"back"===n.direction&&i.filterWindow("close",!1),e.pjax.reload(t.container,{url:n.url})})),e(document).on("pjax:error",(function(){return!1})).on("pjax:success",(function(t,i,o,s,a){if(a.push||a.replace){var r=s.getResponseHeader("url"),c=decodeURIComponent(s.getResponseHeader("title")).replace(/\+/g," "),l=history.state;l.url=r,l.title=c,history.replaceState(l,c,r),e("title").html(c),dataLayer.push({event:"VirtualPageview",virtualPageURL:decodeURIComponent(r),virtualPageTitle:c})}n._refreshEvents(),["city","city-id"].forEach((function(t){var i="#"+t+"-helper";e("#"+t).val(e(i).val())})),e("#okMess0:visible").length>0&&e("#okMess0:visible").parent("div.card").remove()}))},_preventMobileNavigationJumping:function(){var t=this,i=function(){e("#filter-window .filters-controls").length>0&&(t.topPosition=e(this)[0].getBoundingClientRect().top+pageYOffset,t.topPositionElement=["#"+e(this).parents(".checkbox").attr("id")],"#undefined"===t.topPositionElement[0]&&(t.topPositionElement=["#"+e(this).parents(".checkbox").parent().attr("id"),e(this).val()]),"#undefined"===t.topPositionElement[0]&&(t.topPositionElement=["#"+e(this).attr("id")]))},n=e("#filter-window");n.find("select, input[type=checkbox]").off("change",i).on("change",i),n.find(".period, .sort").off("click",i).on("click",i)},_loadFilters:function(t){var i=this,n=e.Deferred();return t?i._reconnect((function(){return i._disableFilter(),e.ajax({url:t,cache:!1}).success((function(t,n,o){e(".filters-block").html(t);var s=e("#filter-window .filters-controls");if(-1!==["#experience_selection","#nosalary_selection","#deferment_selection","#student_selection","#veteran_selection","#retired_selection","#disability_selection","#be_first_selection","#will_be_hidden_selection","#has_phone_selection","#high_salary_selection","#without_remote_selection"].indexOf(i.topPositionElement[0]))a=s.find(i.topPositionElement[0]),s.length>0&&a.length>0&&a.is(":visible")&&s.scrollTop(s.scrollTop()+a.offset().top-i.topPosition+4);else{var a=s.find(i.topPositionElement[0]+(i.topPositionElement[1]?" [value="+i.topPositionElement[1]+"]":""));s.length>0&&a.length>0&&a.is(":visible")?s.scrollTop(s.scrollTop()+a.offset().top-i.topPosition):(a=s.find(i.topPositionElement[0]),s.length>0&&a.length>0&&a.is(":visible")&&s.scrollTop(a.offset().top-45))}i._preventMobileNavigationJumping(),e("body").filterWindow("updateCloseEvent"),i._refreshFilters().always((function(){i._loadFilters(),i._enableFilter(),i._refreshPeriods()}))}))})).done(n.resolve).fail(n.reject):n.resolve(),n.promise()},_submit:function(t){var i=this.options,n=this,o=e.Deferred();return e(i.searchForm).off("submit").on("submit",(function(e){return e.preventDefault(),!1})),t=t||e(this.options.searchForm).SearchSubmit("formAction"),this.updatePage&&(this._disableFilter(),n._reconnect((function(){return e.pjax({url:t,container:n.options.container,scrollTo:!1})})).done((function(){n._enableFilter(),e("body").filterWindow("close",!1)})).done((function(){n._formSubmitEvent()})).done((function(){var e=new Event("SearchResultsReloadedByAjax",{bubbles:!0});document.dispatchEvent(e)})).done(o.resolve).fail(o.reject)),this.updateFilter&&e.when(this._loadFilters(t)).done((function(){n._formSubmitEvent()})).done(o.resolve).fail(o.reject).always((function(){e(document).trigger("pjax:end")})),o.promise()},_updateDropdowns:function(e){var t=this,i=this.dropdowns;function n(e){var i=t.getFilterListEl(e);t.getTargetEl(e).val(i.val())}void 0!==e&&i.indexOf(e)>-1?n(e):i.forEach(n)},_updateCheckboxes:function(t){var i=this,n=this.checkboxes;function o(t){var n=i.getFilterName(t),o=n!==t?e(document):i.getFilterListEl(t),s=i.getTargetEl(t),a=e("input[type=checkbox]"+i.getCheckboxClassName(n)+":checked",o),r=e.map(a,(function(e){return e.value})).join(" ");s.val(r)}void 0!==t&&-1!==n.indexOf(t)?o(t):n.forEach(o)},_doOrNotRefresh:function(t,i,n){var o=this,s=this.updatePage,a=this.updateFilter;this.updatePage=i,this.updateFilter=n,e.when(t()).done((function(){o.updatePage=s,o.updateFilter=a}))},_doNotRefreshThePage:function(e){this._doOrNotRefresh(e,!1,!1)},_doRefreshThePage:function(e){this._doOrNotRefresh(e,!0,!1)},_doRefreshFilters:function(e){this._doOrNotRefresh(e,!1,!0)},_disableFilter:function(){if(!e(".event-prevent").length){var t=e(".filters-block"),i=t.find("select, input[type=checkbox], a"),n=[this.options.container,".header-info","#filter-window"].map((function(t){return e(t)})),o=e("<div />",{css:{position:"absolute",inset:0,zIndex:999},class:"event-prevent"});i.off("change").on("keydown",(function(e){9===e.keyCode&&e.preventDefault()})),n.forEach((function(e){var t=o.clone();e.append(t)})),t.addClass("loading").find(".loading-block").removeClass("hidden")}},_enableFilter:function(){var t=e(".filters-block");t.find("select, input[type=checkbox], a").off("keydown"),t.removeClass("loading").find(".loading-block").addClass("hidden"),e(".event-prevent").remove()},_reconnect:function(t){var i=this;i._timer&&clearTimeout(i._timer);var n=e.Deferred(),o=function(){var s=t(),a=function(){e("body").addClass("disconnect"),e(".filters-block").css("opacity",1),i._timer=setTimeout(o,1e3)};s?("function"==typeof s.success?s.success(n.resolve):"function"==typeof s.done&&s.done(n.resolve),"function"==typeof s.fail?s.fail(a):"function"==typeof s.error&&s.error(a)):n.resolve()};return i._timer=o(),n.promise().done((function(){e("body").removeClass("disconnect"),e(".filters-block").attr("style",null)}))},_filtersUpdate:function(){e(".add-top").html()&&(this._updateDropdowns(),this._updateCheckboxes())},_filtersReset:function(){var t=this,i=e("#city-id").val(),n=e("#search").val(),o=e("#sort").val(),s=e("#days").val(),a=e.Deferred(),r="/jobs/?region="+i+"&search="+n+"&sort="+o+"&days="+s;return this._doRefreshFilters((function(){t._reconnect((function(){return t._loadFilters(r)})).done((function(){t._filtersUpdate()})).done(a.resolve).fail(a.reject)})),a.promise()},_filtersApply:function(){var t=this,i=e.Deferred();return this._doRefreshThePage((function(){t._submit().done((function(){i.resolve()}))})),e(document).scrollTop(0),i.promise()},_refreshPeriods:function(t){var i=this;function n(t,n){var o=e(t).data(n);e("#"+n).val(o),i._submit().done((function(){i._loadFilters()}))}function o(e){e.preventDefault(),n(this,"days")}function s(t){t.preventDefault(),a.apply(i,[e(t).data("sort")]),n(this,"sort")}function a(t){var i=this.options,n=e(i.nearHomeCityInput);n.val()>0&&"distance"!==t&&(n.val(""),e(i.cityInput).removeClass(i.geopositionClass))}if(t){var r=e("#dropdownMenu1"),c=e("#dropdownMenu2");r.next().find("a.days").on("click",o),c.next().find("a.sort").on("click",s),c.next().find("a.desc").on("click",(function(t){t.preventDefault();var n="desc",o=e(this).data(n),s=void 0!==window.location.search?window.location.search.match(/page=(\d{1,})/i):0;0===e("#"+n).length&&(e("<input type='hidden' value='"+o+"'/>").attr("id",n).attr("name",n).appendTo(i.options.searchForm),s&&void 0!==s[1]&&s[1]>0&&e("<input type='hidden' value='"+s[1]+"'/>").attr("id","page_val").attr("name","page").appendTo(i.options.searchForm)),i._submit().done((function(){e("#"+n).remove(),e("#page_val").remove()}))}))}var l=e(".additional-filter");l.find("a.period").on("click",o),l.find("a.sort").on("click",s)},isDependencyCheckbox:function(e){return-1!==this.checkboxesDependency.indexOf(e)},getCheckboxClassName:function(e){return this.isDependencyCheckbox(e)?".filter-item__"+e:""},getCheckboxes:function(){var t=this.checkboxes;return e(this.options.languages).each((function(e,i){t.push("language_level_"+i.id)})),t},getFilterListId:function(e){return e+"_selection"},getFilterListEl:function(t){return e("#"+this.getFilterListId(t))},getFilterName:function(e){var t=this.getFilterListEl(e);return t.data("target")?t.data("target"):e},getTargetId:function(e){var t=this.getFilterListEl(e);return t.data("target")?t.data("target"):e},getTargetEl:function(t){return e("#"+this.getTargetId(t))},_refreshFilters:function(){var t=this,i=[],n=e.Deferred();return this.dropdowns.each((function(n){var o=t.getFilterListEl(n),s="#"+n;o.on("change",(function(a,r){a.stopPropagation(),"#salaryfrom"===s&&0===o.val().toString()&&e("#salaryto").val(o.val()),"#salaryto"===s&&0===o.val().toString()&&e("#salaryfrom").val(o.val()),t._updateDropdowns(n);var c=t._submit();c.done((function(){"function"==typeof r&&r()})),i.push(c),e(this).blur()}))})),this.checkboxes.each((function(n){var o=t.getFilterListEl(n);e("input[type=checkbox]"+t.getCheckboxClassName(n),o).on("change",(function(e,o){t._updateCheckboxes(n);var s=t._submit();s.done((function(){"function"==typeof o&&o()})),i.push(s)}))})),e("#city-header").empty().append(e("#city-header-helper").html()),e("#city-header-helper").remove(),e("#industry_more").off("click").on("click",(function(){return e(".checkbox",e("#industry_selection")).removeClass("hide"),e(this).remove(),!1})),e("#cat_more").off("click").on("click",(function(){return e(".checkbox",e("#category_selection")).removeClass("hide"),e(this).remove(),!1})),e("#lang_more").off("click").on("click",(function(){return e(".checkbox",e("#language_selection")).removeClass("hide"),e(this).remove(),!1})),e("a.checkbox-link-js").off("click").on("click",(function(){return e(this).siblings("input[type='checkbox']").prop("checked",(function(e,t){return!t})).trigger("change"),!1})),e("#filters-apply").off("click").on("click",(function(e){i.push(t._filtersApply())})),e("#filters-reset").off("click").on("click",(function(e){t.topPosition=0,t.topPositionElement=[],i.push(t._filtersReset())})),e.when.apply(this,i).done(n.resolve).fail(n.reject),n.promise()},_refreshRemoveFilters:function(){var t=this;e("body").on("click","span.removefilter",(function(){var t=e(this),i=e("#"+t.data("check"));return i.length>0&&(e("input[value="+t.data("id")+"]",i).length>0?e("input[value="+t.data("id")+"]",i).prop("checked",!1).trigger("change",(function(){t.parent().remove()})):i.val(0).trigger("change",(function(){t.parent().remove()}))),!1})),e(".filter-reset").on("click",(function(i){i.preventDefault(),t._doNotRefreshThePage((function(){e("span.removefilter").click()})),t._submit()}))},_refreshEvents:function(){var t=this.options,i=e("body"),n=this;if(e(".js-employer-rating-inset").length>0&&n.employerRatingInset(),e("#resume-add-position-inset").length>0&&n.resumeAddPositionInset(),t.infinityScroll&&(n.infinityScroll(),n.isLoadMoreJobs()),e("#resume-publish-inset").length>0&&n.resumePublishInset(),e("#pjax-jobs-list").data("user-id")>0&&n.sendEventJobsInteraction(),e("#scrollUpBtn").length>0&&n.scrollUpPage(),e(".job-link").setClickBlock(),e(document).popoverInit(),e(".col-md-4 a.js-collapse-more").off("click").on("click",(function(){e(this).parents("div").children(".hide").removeClass("hide"),e(this).parent().hide()})),Work.widgets.languageSwitcher.prepareUrls((function(t){var i=e("#locales-active-path");if(i.size()&&!t.hasClass("active")){var n=i.val();return n=n+(-1===n.indexOf("?")?"?":"&")+"setlp="+t.data("locale"),Work.localeService.getURLPrefix(t.data("locale"))+n}})),n.paginationReload)return n.addPaginationEvents(t.selector,t.jobListContainer),n._refreshFilters(),void n._refreshRemoveFilters();this._doNotRefreshThePage((function(){n._filtersUpdate()})),i.filterWindow("update"),e(t.searchForm).length>0&&(this._refreshFilters(),this._refreshPeriods(!0),this._refreshRemoveFilters(),n.addPaginationEvents(t.selector,t.jobListContainer),e("#fast_filters").length>0&&n.fastFilters())},addPaginationEvents:function(t,i){var n=this;n.paginationReload=!1,e(t).on("click",(function(t){t.preventDefault();var o=e(this).attr("href"),s=!0;n.paginationReload=!0,n._disableFilter(),n._reconnect((function(){return e.pjax.reload(i,{url:o,scrollTo:0,push:!0,replace:!1,fragment:i}).fail((function(){s&&(e("#searchform")[0].scrollIntoView(),s=!1)}))})).done((function(){n._enableFilter(),e("body").filterWindow("isMobile")||e(n.options.filterWindow.contentback).is(":visible")||!e("#bannerSticky").length||(e(".job-link").length<4||e("#bannerSticky").offset().top-225>e(".pagination").offset().top?e("#bannerSticky").hide():e("#bannerSticky").show())}))}))},infinityScroll:function(){var t,i,n=this,o=this.options,s=n.getPageNumberFromSearchParams();function a(e){var t=window.location,i=t.search,n=t.pathname;return i?i.includes("page=")?n+i.replace(/page\=\d+/g,"page="+e):n+i+"&page="+e:n+"?page="+e}function r(t,i,s){var r=e("#pjax-jobs-list"),c=[],l=e(".js-load-next-spinner"),d=e(".js-load-prev-spinner"),u=r.children().first(),h=e(".js-pagination-search");i?(l.show(),e(".js-load-more").hide()):d.show(),e.ajax({url:a(t)+"&_pjax=%23pjax-job-list",type:"GET",dataType:"html",success:function(t){var a=e((new DOMParser).parseFromString(t,"text/html"));if(a.find("#pjax-jobs-list").find(".card-job-defense, .card, a[name]").not(".card-job-defense .card").each((function(){c.push(e(this))})),i){for(var r=a.find(".js-pagination-search"),p=0;p<c.length;p++)e("#pjax-jobs-list").append(c[p]);h.replaceWith(r),n.addPaginationEvents(o.selector,o.jobListContainer),l.hide()}else{for(p=c.length-1;p>=0;p--)e("#pjax-jobs-list").prepend(c[p]);e(u).get(0).scrollIntoView({block:"center",behavior:"auto"}),d.hide()}e(".job-link").setClickBlock(),e("#pjax-jobs-list .card").popoverInit(),s(!0),e("body").filterWindow("isMobile")||e(n.options.filterWindow.contentback).is(":visible")||!e("#bannerSticky").length||(e(".job-link").length<4?e("#bannerSticky").hide():e("#bannerSticky").show())},error:function(){s(!1)}})}s>1&&(e(".js-load-back").show(),e(document).off("click",".js-load-back").on("click",".js-load-back",(function(t){t.preventDefault(),e(".js-load-back").hide(),s>1&&r(s-1,!1,(function(t){--s>1&&e(".js-load-back").show(),n.isLoadMoreJobs()}))}))),e(document).off("click",".js-load-more").on("click",".js-load-more",(function(){e(".js-load-more").hide(),r(n.getPageNumberFromSearchParams()+1,!0,(function(t){s>1&&e(".js-load-back").show(),n.isLoadMoreJobs()}))})),e(window).on("scroll",(function(){t||(t=setTimeout((function(){var i=e(".job-link"),o=new URL(location);i.each((function(t){var i=this.getBoundingClientRect();if(i.top>=0&&i.bottom<=window.innerHeight&&e(this).data("page")){var s=e(this).data("page");s!==n.getPageNumberFromSearchParams()&&(o.searchParams.set("page",s),history.replaceState({},"",o))}})),t=null}),200))})),e(window).on("popstate",(function(){location.reload()})),e(document).on("click","#pjax-job-list .job-link",(function(t){var i=e(this).data("id"),n=new URL(window.location.href),o=e(this).data("page");n.searchParams.set("page",o),n.hash=i,history.replaceState({},"",n),history.scrollRestoration&&(history.scrollRestoration="manual")})),i=window.location.hash.substring(1),e(".job-link").each((function(){e(this).data("id").substring(1)===i&&this.scrollIntoView({block:"center",behavior:"auto"})}))},isLoadMoreJobs:function(){e(".js-load-more").length>0&&e(".job-link").each((function(){e(this).data("page")==e(".js-load-more").data("total")?e(".js-load-more").hide():e(".js-load-more").show()}))},getPageNumberFromSearchParams:function(){var e=new URL(window.location.href).searchParams.get("page");return parseInt(e||1)},resumePublishInset:function(){e("#resume-publish-inset").pdfViewer({dataParams:{ajaxPreviewUrl:"ajax-preview-url",viewPDFUrl:"view-pdf-url",onlyPreview:!0},selectors:{openPdfViewerBlock:".js-show-pdf-viewer",pdfViewerProcessingBlock:".js-processing-pdf-preview",resumeFilePreviewContainer:".js-resume-file-preview-component"}})},showPopupGeolocation:function(){var t=this.options;Addresses.autodetectGeolocationWithSave((function(i){e(window).trigger("geolocation.autodetect.nearHomeCity.finish"),!i||i.error?(e(t.cityInput).removeClass(t.geopositionClass).parent().find(t.nearHomeCityInput).val(""),Addresses.showPopupWithSelectAddress({popupCloseLinkClasses:"js-analytics-jobseeker-close-modal"})):(e(t.cityInputHidden).val(i[0].town_id),e(t.nearHomeCityInput).val(i[0].town_id),e(t.searchButton).trigger("click"))}))},fastFilters:function(){var t=this,i=e("#fast_filters"),n=e("#dropdownMenu2").next(".dropdown-menu").find('[data-sort="date"]'),o=e('#fast_filters [id*="_fast_filters"]').map((function(){return this.id})).get();function s(t,i){e.ajax({type:"post",url:"/api/v1/event/spark/",data:{id:"81",data:{eventType:t+"FastFilter",filterType:i}},dataType:"json"})}document.cookie.includes("isShowFastFilter=1")||(document.cookie="isShowFastFilter=1; path=/; max-age=31536000"),i[0].addEventListener("animationend",(function(){i[0].classList.add("animation-end")})),e('[id$="_fast_filter_message"]').each((function(){localStorage.getItem(this.id)||e(this).removeClass("hide")})),e(document).on("click",".js-close-fast-filter-message",(function(){var t=e(this).closest('[id$="_fast_filter_message"]'),i=t.attr("id");localStorage.setItem(i,"false"),t.addClass("hide")})),e(document).off("click",'[id$="_fast_filters"]').on("click",'[id$="_fast_filters"]',(function(){var o=e(this).attr("id"),a=e(this).is(":checked");(i.addClass("disabled pointer-none"),"sort_distance_fast_filters"===o)?a?t.showPopupGeolocation():n.click():e("#"+o.replace("_fast_filters","_selection")+" input").click();s(a?"click":"close",o)})),e(document).on("click",".js-analytics-jobseeker-close-modal",(function(){i.removeClass("disabled pointer-none"),e("#sort_distance_fast_filters").prop("checked",!1)})),o.length>0&&s("show",o)},employerRatingInset:function(){const t=e(".js-employer-rating-inset"),i=t.data("company-id"),n=e(".js-employer-rating-btn");function o(t,i){e.ajax({type:"post",url:"/api/v1/event/spark/",data:{id:"74",data:{companyId:t,eventType:i}},dataType:"json",complete:function(){"clickInset"===i&&(window.location.href=n.attr("href"))}})}const s=new IntersectionObserver((function(e,t){e.forEach((function(e){e.isIntersecting&&(o(i,"viewInset"),t.unobserve(e.target))}))}),{threshold:.5});t.length>0&&s.observe(t[0]),n.click((function(e){e.preventDefault(),o(i,"clickInset")}))},resumeAddPositionInset:function(){let t=e("#resume-add-position-inset"),i=t.data("id");function n(t){e.ajax({type:"post",url:"/api/v1/event/spark/",data:{id:"90",data:{resumeId:i,eventType:t}},dataType:"json"})}!function(){let e=new IntersectionObserver((function(e,t){e.forEach((function(e){e.isIntersecting&&(n("insetPositionShow"),t.unobserve(e.target))}))}),{threshold:.5});t.length>0&&e.observe(t[0])}(),e(document).off("click",".js-add-position-inset").on("click",".js-add-position-inset",(function(){let t=e(this),i=t.closest("#resume-add-position-inset"),o=i.data("id"),s=i.data("position"),a=i.data("add-position"),r=i.find(".js-show-position-inset"),c=`<span class="text-green-700">${a}</span>`;t.prop("disabled",!0),e.ajax({url:`/api/v1/my/resumes/${o}/position/`,type:"PATCH",contentType:"application/json",data:JSON.stringify({position:`${a}`}),success:function(){r.length?r.append(`, ${c}`):t.before(`<p class="mb-0"><span class="text-default-7">${lang.resume_positions_title}</span> ${s}, ${c}</p>`),t.replaceWith(`\n                            <span class="btn text-green-700 pointer-none pl-0 pr-0 mt-lg">\n                                <span class="glyphicon glyphicon-tick glyphicon-fs-24 mr-sm"></span>\n                                <span>${lang.position_added}</span>\n                            </span>`),n("insetPositionClick")},error:function(){location.reload()}})}))},sendEventJobsInteraction:function(){if(!e("#pjax-jobs-list").data("user-id"))return;function t(e,t){const i=e.filter((function(e){return null!=e}));return 0===i.length?null:{id:"104",data:{jobId:i,eventType:t}}}window.jobObserver&&(window.jobObserver.disconnect(),window.jobObserver=null),e(".job-link").off("click.sendClickedJobAnalytics");let i,n=new Set;function o(i,o,s){const a=t(Array.from(i),o);if(!a)return!1;i.clear();const r="/api/v1/event/spark/";if(s&&navigator.sendBeacon){const e=JSON.stringify(a),t=new Blob([e],{type:"application/json"});navigator.sendBeacon(r,t)}else e.ajax({type:"post",url:r,data:a,dataType:"json",success:function(){a.data.jobId.forEach((function(e){n.delete(e)}))}});return!0}const s=new IntersectionObserver((function(t){t.forEach((function(t){if(t.isIntersecting&&t.intersectionRatio>=.7){const s=e(t.target).data("id");null==s||n.has(s)||(n.add(s),i&&clearTimeout(i),i=setTimeout((function(){n.size>0&&o(n,"showJobOnSearch",!1)}),1500))}}))}),{threshold:[.7]});window.jobObserver=s,e(".job-link").each((function(){s.observe(this),e(this).on("click.sendClickedJobAnalytics",(function(){let i=e(this).data("id");null!=i&&function(i,n){const o=t([i],n);if(!o)return!1;const s="/api/v1/event/spark/";if(navigator.sendBeacon){const e=JSON.stringify(o),t=new Blob([e],{type:"application/json"});navigator.sendBeacon(s,t)}else e.ajax({type:"post",url:s,data:o,dataType:"json"})}(i,"clickJobOnSearch")}))}));let a=!1;function r(){if(a||0===n.size)return;o(n,"showJobOnSearch",!0)&&(a=!0)}"undefined"==typeof window||window._jobAnalyticsBeaconListenersAdded||(window.addEventListener("beforeunload",r),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&r()})),window._jobAnalyticsBeaconListenersAdded=!0)}}),new Class({Implements:[Options],jQuery:"CreateCardOnSearch",$el:null,options:{changeFieldsToggleSelector:"#card-fields-toggle",inputRegionSelector:".js-region-card",inputCardNameSelector:"#resume-name-card",inputUserNameSelector:"#user-name-card",cardFormSelector:"#card-form",isVeteranCheckbox:"#isVeteran"},validatorOptions:{onsubmit:!1,ignore:"",rules:{user_name:{required:!0,checkNum:!0,checkFio:!0,checkFirstNameEqualsLastName:!0},name:{required:!0,caps2:!0,uniqwords:!0,minlength:3},"region_sid[]":{required:!0,cityCheck:!0}},messages:{user_name:{required:lang.resume_send.err_user_name,checkNum:lang.form_errs.illegal_symbols2,checkFio:lang.resume_send.err_user_name,checkFirstNameEqualsLastName:lang.resume_send.err_checkFirstNameEqualsLastName},name:{required:_fieldErr("empty_rеsume_title"),caps2:_fieldErr("caps2"),uniqwords:_fieldErr("uniqwords"),minlength:_fieldErr("minlength_resume_title")},"region_sid[]":{required:_fieldErr("empty_select_for_region_tid","region_sid"),cityCheck:_fieldErr("empty_select_for_region_tid","region_sid")}}},initialize:function(t,i){return this.setOptions(i),e.extend(e.validator.prototype,{showFormError:function(){}}),this.initForm(),this.initEvents(),this},initEvents:function(){var t=this,i=this.options;e(document).on("click",i.changeFieldsToggleSelector,(function(n){var o=e(this),s=e("#"+o.attr("data-toggle"));o.find(".glyphicon").toggleClass("glyphicon-chevron-down").toggleClass("glyphicon-chevron-up"),s.slideToggle(),null===t.$el&&(window.cities_activated=0,e(i.inputRegionSelector).on("change",(function(){""==this.value.trim()&&e("#card-title-region").text("")})).citySuggest({towns:!0,typeaheadAfterUpdater:function(t,i,n){e("#card-title-region").text(n.city_v1)}}),e(i.inputCardNameSelector).on("change",(function(){e("#card-title-position").text(this.value)})).SearchComplete({profession:1,isCardProfessionSearch:1,validCallback:function(){e(this.el).toggleClass("invalid-position",!this.isFocus()&&!this.validPosition)},onclose:function(){this.el.valid()}}),e(i.inputUserNameSelector).on("change",(function(){""==this.value.trim()?e(".js-card-title-name").hide().first().text(""):e(".js-card-title-name").show().first().text(this.value.trim())})),t.$el=o)})),e(document).on("keypress",i.cardFormSelector,(function(t){return 13==t.keyCode&&e(":focus").trigger("click"),13!=t.keyCode}))},initForm:function(){var t=this,i=t.options,n=e(i.isVeteranCheckbox);this.sf=e(this.options.cardFormSelector),0!==this.sf.length&&(this.validator=this.sf.validate(this.validatorOptions),this.sf.on("submit",(function(e){return!1===t.submitForm()&&t.validator.focusInvalid(),!1})),n.prop("disabled",!1).on("click",(function(){this.checked&&(e(this).prop("checked",!1),e("body").ModalBPWnd({title:lang.veteran_status.modal_title,headerClass:"pr-xl",empty_content:!0,footer_buttons:[{name:lang.veteran_status.modal_confirm,func:function(){e(".js-card-form #isVeteran").prop("checked",!0)},type:"button",close_on_click:1,add_class:"ga-click-confirm-veteran-status"},{name:lang.veteran_status.modal_cancel,type:"button",close_on_click:1,add_class:"ga-click-decline-veteran-status"}]}),e("body").ModalBPWnd("open"))})))},submitForm:function(){var t=this.options,i=e("#submit-card-form"),n=!!e(t.isVeteranCheckbox).is(":checked");if(this.validator.hideFormError(),!this.validator.form())return(e(t.inputUserNameSelector).not(":visible").length||e(t.inputCardNameSelector).not(":visible").length)&&e(t.changeFieldsToggleSelector).trigger("click"),!1;i.prop("disabled",!0),dataLayer.push({event:"CardFormFillRegistered"});let o=e('input[name="region_tid[]"]',this.sf),s=[];o.each((function(e){let t=o.eq(e).val();t>0&&null!==t&&s.push(t)}));const a={userName:e(t.inputUserNameSelector).val(),positions:[e(t.inputCardNameSelector).val()],regionIds:s,isVeteran:n,isSaveCard:!0};e.ajax({url:"/api/v7/my/resumes/create/card/",data:JSON.stringify(a),type:"POST",dataType:"json",contentType:"application/json"}).fail((function(){})).done((function(t){e("div.js-card-form").hide(),e("div.js-card-saved").show().find(".js-card-saved-btn").attr("href","/jobseeker/my/resumes/create/?card="+t.cardId)})).always((function(){i.prop("disabled",!1)}))}}),e(document).on("click","#filter-mobile-sort",(function(){e("#search-sort-filter").prev(".js-backdrop-window").fadeIn(50),e("body").addClass("overflow"),e("#search-sort-filter").removeClass("hidden").animate({top:30},{duration:400,complete:function(){e(window).scrollTop(0)}}),e("#search-sort-filter #sort-apply").attr("href",window.location.href)})),e(document).on("click","#search-sort-filter .link-close",(function(){t()})),e(document).on("keyup",(function(i){"Escape"!==i.key||e("#search-sort-filter").hasClass("hidden")||t()})),e(document).on("change","#search-sort-mobile input",(function(){var t=new URL(window.location.href),i=t.searchParams,n=e("#search-sort-mobile .days:checked").val(),o=e("#search-sort-mobile .sort:checked").val();null!==n&&""!==n?i.set("days",n):i.delete("days"),null!==o&&""!==o?i.set("sort",o):i.delete("sort"),e("#search-sort-filter #sort-apply").attr("href",t.toString())})),e(document).on("click",".js-click-onboarding",(function(){e.ajax({type:"post",url:"/api/v1/event/spark/",data:{id:"82",data:{eventType:"clickOnboardingSearch"}},dataType:"json"})})),e(document).on("click",".js-click-search",(function(){e.ajax({type:"post",url:"/api/v1/event/spark/",data:{id:"82",data:{eventType:"clickSearch"}},dataType:"json"})})),e(document).off("click","#without_remote_selection input").on("click","#without_remote_selection input",(function(){const t=e(this).is(":checked");e.ajax({type:"post",url:"/api/v1/event/spark/",data:{id:"102",data:{eventType:t?"clickOnWithoutRemoteJob":"clickOffWithoutRemoteJob"}},dataType:"json"})}))}(jQuery);