const createSavedSearchWithMessengers={checkAuthCount:20,checkAuthTimeoutSeconds:10,timeoutIds:[],buttonSelectors:[],messageSelector:"",localStorageKey:"createSavedSearchWithMessengers",init:function(e,t,o,c){this.checkAuthCount=e,this.checkAuthTimeoutSeconds=t,Array.isArray(o)||(o=[o]),this.buttonSelectors=o,this.messageSelector=c,this.checkLocalStorageAndShowMessage(),this.registerOnclickEvent()},registerOnclickEvent:function(){const e=this;e.buttonSelectors.forEach((function(t){$(document).on("click",t,(function(t){t.preventDefault(),e.clearTimeouts();for(let t=1;t<=e.checkAuthCount;t++){const o=setTimeout((function(){e.checkAuth()}),t*e.checkAuthTimeoutSeconds*1e3);e.addIdToTimeoutIds(o)}const o=$(this).attr("href");o&&window.open(o,"_blank")}))}))},addIdToTimeoutIds:function(e){this.timeoutIds.push(e)},clearTimeouts:function(){this.timeoutIds.forEach(clearTimeout),this.timeoutIds=[]},checkAuth:function(){const e=this;$.ajax({url:"/ajax/check-auth/",type:"GET",dataType:"json",success:function(t){t.isAuth&&(e.messageSelector&&localStorage.setItem(e.localStorageKey,"1"),location.reload())}})},checkLocalStorageAndShowMessage:function(){this.messageSelector&&"1"===localStorage.getItem(this.localStorageKey)&&(localStorage.removeItem(this.localStorageKey),$(this.messageSelector).removeClass("hide"))}};